{"ast":null,"code":"import _toConsumableArray from\"/Users/bhawesh/Desktop/01-starting-setup/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/bhawesh/Desktop/01-starting-setup/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/bhawesh/Desktop/01-starting-setup/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useContext}from'react';import{UserContext}from'../../App';import{useParams}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Profile=function Profile(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),userProfile=_useState2[0],setProfile=_useState2[1];var _useContext=useContext(UserContext),state=_useContext.state,dispatch=_useContext.dispatch;var _useParams=useParams(),userid=_useParams.userid;var _useState3=useState(state?!state.following.includes(userid):true),_useState4=_slicedToArray(_useState3,2),showfollow=_useState4[0],setShowFollow=_useState4[1];console.log(userid);// console.log(userProfile)y\nuseEffect(function(){fetch(\"/user/\".concat(userid),{headers:{\"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")}}).then(function(res){return res.json();}).then(function(result){// console.log(\"hi\")\nconsole.log(result);setProfile(result);});},[]);var followUser=function followUser(){fetch('/follow',{method:\"put\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \"+localStorage.getItem('jwt')},body:JSON.stringify({followId:userid})}).then(function(res){return res.json();}).then(function(data){console.log(data);dispatch({type:\"UPDATE\",payload:{following:data.following,followers:data.followers}});localStorage.setItem(\"user\",JSON.stringify(data));setProfile(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{user:_objectSpread(_objectSpread({},prevState.user),{},{followers:[].concat(_toConsumableArray(prevState.user.followers),[data._id])})});});setShowFollow(false);});};var unfollowUser=function unfollowUser(){fetch('/unfollow',{method:\"put\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \"+localStorage.getItem('jwt')},body:JSON.stringify({unfollowId:userid})}).then(function(res){return res.json();}).then(function(data){dispatch({type:\"UPDATE\",payload:{following:data.following,followers:data.followers}});localStorage.setItem(\"user\",JSON.stringify(data));setProfile(function(prevState){var newFollower=prevState.user.followers.filter(function(item){return item!=data._id;});return _objectSpread(_objectSpread({},prevState),{},{user:_objectSpread(_objectSpread({},prevState.user),{},{followers:newFollower})});});setShowFollow(true);});};return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:\"650px\",margin:\"0px auto\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:\"space-around\",margin:\"120px 0px\",borderBottom:\"1px solid grey\"},children:[/*#__PURE__*/_jsxs(\"div\",{children:[console.log(userProfile),userProfile?/*#__PURE__*/_jsx(\"img\",{style:{width:\"160px\",height:\"160px\",borderRadius:\"80px\"},src:userProfile.user.pic}):null]}),userProfile?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:userProfile.user.name}),/*#__PURE__*/_jsx(\"h5\",{children:userProfile.user.email}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",width:\"108%\"},children:[/*#__PURE__*/_jsxs(\"h6\",{children:[userProfile.posts.length,\" posts\"]}),/*#__PURE__*/_jsxs(\"h6\",{children:[userProfile.user.followers.length,\" followers\"]}),/*#__PURE__*/_jsxs(\"h6\",{children:[userProfile.user.following.length,\" following\"]})]}),showfollow?/*#__PURE__*/_jsx(\"button\",{style:{margin:\"10px\"},className:\"btn waves-effect waves-light #64b5f6 blue darken-1\",onClick:function onClick(){return followUser();},children:\"Follow\"}):/*#__PURE__*/_jsx(\"button\",{style:{margin:\"10px\"},className:\"btn waves-effect waves-light #64b5f6 blue darken-1\",onClick:function onClick(){return unfollowUser();},children:\"UnFollow\"})]}):null]}),console.log(userProfile),/*#__PURE__*/_jsx(\"div\",{className:\"gallery\",children:userProfile?userProfile.posts.map(function(item){return/*#__PURE__*/_jsx(\"img\",{className:\"item\",src:item.photo,alt:item.title},item._id);}):null})]});};export default Profile;","map":{"version":3,"sources":["/Users/bhawesh/Desktop/01-starting-setup/src/components/screens/UserProfile.js"],"names":["React","useEffect","useState","useContext","UserContext","useParams","Profile","userProfile","setProfile","state","dispatch","userid","following","includes","showfollow","setShowFollow","console","log","fetch","headers","localStorage","getItem","then","res","json","result","followUser","method","body","JSON","stringify","followId","data","type","payload","followers","setItem","prevState","user","_id","unfollowUser","unfollowId","newFollower","filter","item","maxWidth","margin","display","justifyContent","borderBottom","width","height","borderRadius","pic","name","email","posts","length","map","photo","title"],"mappings":"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","sourcesContent":["import React, {useEffect, useState, useContext} from 'react'\nimport { UserContext } from '../../App'\nimport {useParams} from 'react-router-dom'\nconst Profile  = ()=>{\n    const [userProfile,setProfile] = useState(null)\n\n    const {state,dispatch} = useContext(UserContext)\n    const {userid} = useParams()\n    const [showfollow,setShowFollow] = useState(state?!state.following.includes(userid):true)\n\n    console.log(userid)\n    // console.log(userProfile)y\n  useEffect(()=>{\n\n    fetch(`/user/${userid}`,{\n        headers:{\n              \"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")\n          }\n        }).then(res=>res.json())\n        .then(result=>{\n            // console.log(\"hi\")\n            console.log(result)\n          \n            setProfile(result)\n        })\n     },[])\n\n     const followUser = ()=>{\n        fetch('/follow',{\n            method:\"put\",\n            headers:{\n                \"Content-Type\":\"application/json\",\n                \"Authorization\":\"Bearer \"+localStorage.getItem('jwt')\n            },\n            body:JSON.stringify({\n                followId:userid\n            })\n        }).then(res=>res.json())\n        .then(data=>{console.log(data)\n        dispatch({type:\"UPDATE\",payload:{following:data.following,followers:data.followers}})\n        localStorage.setItem(\"user\",JSON.stringify(data))\n        setProfile((prevState)=>{\n            return {\n                ...prevState,\n                user:{\n                    ...prevState.user,\n                    followers:[...prevState.user.followers,data._id]\n                   }\n            }\n        })\n        setShowFollow(false)\n        })\n    }\n    const unfollowUser = ()=>{\n        fetch('/unfollow',{\n            method:\"put\",\n            headers:{\n                \"Content-Type\":\"application/json\",\n                \"Authorization\":\"Bearer \"+localStorage.getItem('jwt')\n            },\n            body:JSON.stringify({\n                unfollowId:userid\n            })\n        }).then(res=>res.json())\n        .then(data=>{\n            \n            dispatch({type:\"UPDATE\",payload:{following:data.following,followers:data.followers}})\n             localStorage.setItem(\"user\",JSON.stringify(data))\n            \n             setProfile((prevState)=>{\n                const newFollower = prevState.user.followers.filter(item=>item != data._id )\n                 return {\n                     ...prevState,\n                     user:{\n                         ...prevState.user,\n                         followers:newFollower\n                        }\n                 }\n             })\n             setShowFollow(true)\n             \n        })\n    }\n   return (\n       <div style={{maxWidth:\"650px\",margin:\"0px auto\"}}>\n           <div style={{\n               display:'flex',\n               justifyContent:\"space-around\",\n               margin:\"120px 0px\",\n               borderBottom:\"1px solid grey\"\n           }}>\n               <div>\n                   {console.log(userProfile)}\n                {userProfile?<img style={{width:\"160px\",height:\"160px\",borderRadius:\"80px\"}} src={userProfile.user.pic}/> : null}\n               </div>\n               {userProfile ? (<div>\n               <h4>{userProfile.user.name}</h4>\n                   <h5>{userProfile.user.email}</h5>\n                   <div style={{display:\"flex\",justifyContent:\"space-between\",width:\"108%\"}}>\n                       <h6>{userProfile.posts.length} posts</h6>\n                       <h6>{userProfile.user.followers.length} followers</h6>\n                       <h6>{userProfile.user.following.length} following</h6>\n\n                 </div>\n                 {showfollow?\n                    <button style={{\n                        margin:\"10px\"\n                    }} className=\"btn waves-effect waves-light #64b5f6 blue darken-1\"\n                    onClick={()=>followUser()}\n                    >\n                        Follow\n                    </button>:\n                    <button style={{\n                        margin:\"10px\"\n                    }} className=\"btn waves-effect waves-light #64b5f6 blue darken-1\"\n                    onClick={()=>unfollowUser()}\n                    >\n                        UnFollow\n                    </button>\n                 }\n\n\n\n\n               </div>): null}\n           </div>\n           {console.log(userProfile)}\n           <div className=\"gallery\">\n               {\n                  userProfile ?\n                   userProfile.posts.map(item=>{\n                       return(\n                           <img key={item._id} className='item' src={item.photo} alt={item.title} />\n                       )\n                   }) : null\n               }\n           </div>\n       </div>\n   )\n \n}\n\n\nexport default Profile"]},"metadata":{},"sourceType":"module"}