{"ast":null,"code":"import _objectSpread from\"/Users/bhawesh/Desktop/01-starting-setup/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/bhawesh/Desktop/01-starting-setup/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useContext}from'react';import{UserContext}from'../../App';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Profile=function Profile(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),mypics=_useState2[0],setPics=_useState2[1];var _useContext=useContext(UserContext),state=_useContext.state,dispatch=_useContext.dispatch;var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],setImage=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),url=_useState6[0],setUrl=_useState6[1];useEffect(function(){fetch('/mypost',{headers:{\"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")}}).then(function(res){return res.json();}).then(function(result){setPics(result.mypost);});},[]);useEffect(function(){if(image){console.log('Upload Pic');console.log(url);var data=new FormData();data.append('file',image);data.append('upload_preset','upload');data.append('cloud_name','ddlgib7yw');fetch(\"https://api.cloudinary.com/v1_1/ddlgib7yw/image/upload\",{method:\"post\",body:data}).then(function(res){return res.json();}).then(function(data){setUrl(data.url);//localStorage.setItem(\"user\",JSON.stringify({...state,pic:data.url}))\n//dispatch({type:\"UPDATEPIC\",payload:data.url})\nfetch('/updatepic',{method:'put',headers:{'Content-Type':'application/json','Authorization':\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({pic:data.url})}).then(function(res){return res.json();}).then(function(result){console.log(result);localStorage.setItem(\"user\",JSON.stringify(_objectSpread(_objectSpread({},state),{},{pic:result.pic})));dispatch({type:\"UPDATEPIC\",payload:result.pic});window.location.reload();});//   window.location.reload();\n}).catch(function(err){console.log(err);});}},[image]);var updatePhoto=function updatePhoto(file){setImage(file);};return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:\"550px\",margin:\"0px auto\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"18px 0px\",borderBottom:\"1px solid grey\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:\"space-around\"//    margin:\"120px 0px\",\n//    borderBottom:\"1px solid grey\"\n},children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{style:{width:\"200px\",height:\"200px\",borderRadius:\"100px\"},src:state?state.pic:\"loading\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:state?state.name:\"loading\"}),/*#__PURE__*/_jsx(\"h5\",{children:state?state.email:\"loading\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",width:\"108%\"},children:[/*#__PURE__*/_jsxs(\"h6\",{children:[mypics?mypics.length:\"0\",\" posts\"]}),/*#__PURE__*/_jsxs(\"h6\",{children:[state?state.followers.length:\"0\",\" followers\"]}),/*#__PURE__*/_jsxs(\"h6\",{children:[state?state.following.length:\"0\",\" following\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{})]}),/*#__PURE__*/_jsx(\"div\",{style:{position:\"relative\",margin:\"8px 50px\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"file-field input-field\",style:{margin:\"10px\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"btn\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Update Pic\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:function onChange(e){updatePhoto(e.target.files[0]);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"file-path-wrapper\",children:/*#__PURE__*/_jsx(\"input\",{className:\"file-path validate\",type:\"text\"})})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery\",children:mypics?mypics.map(function(item){return/*#__PURE__*/_jsx(\"img\",{className:\"item\",src:item.photo,alt:item.title},item._id);}):null})]});};export default Profile;","map":{"version":3,"sources":["/Users/bhawesh/Desktop/01-starting-setup/src/components/screens/Profile.js"],"names":["React","useEffect","useState","useContext","UserContext","Profile","mypics","setPics","state","dispatch","image","setImage","url","setUrl","fetch","headers","localStorage","getItem","then","res","json","result","mypost","console","log","data","FormData","append","method","body","JSON","stringify","pic","setItem","type","payload","window","location","reload","catch","err","updatePhoto","file","maxWidth","margin","borderBottom","display","justifyContent","width","height","borderRadius","name","email","length","followers","following","position","e","target","files","map","item","photo","title","_id"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react'\nimport { UserContext } from '../../App'\nconst Profile = () => {\n    const [mypics, setPics] = useState([])\n    const { state, dispatch } = useContext(UserContext)\n    const [image, setImage] = useState('')\n    const [url, setUrl] = useState('')\n\n    useEffect(() => {\n        fetch('/mypost', {\n            headers: {\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n            }\n        }).then(res => res.json())\n            .then(result => {\n                setPics(result.mypost)\n            })\n    }, [])\n\n    useEffect(()=>{\n        if(image)\n        {\n            console.log('Upload Pic');\n            console.log(url);\n    \n            const data = new FormData()\n            data.append('file', image)\n            data.append('upload_preset', 'upload')\n            data.append('cloud_name', 'ddlgib7yw')\n            fetch(\"https://api.cloudinary.com/v1_1/ddlgib7yw/image/upload\", {\n                method: \"post\",\n                body: data\n            })\n                .then(res => res.json())\n                .then(data => {\n              \n                    \n    \n                    setUrl(data.url)\n                    //localStorage.setItem(\"user\",JSON.stringify({...state,pic:data.url}))\n                    //dispatch({type:\"UPDATEPIC\",payload:data.url})\n\n                    fetch('/updatepic',{\n                        method:'put',\n                        headers:{\n                            'Content-Type':'application/json',\n                            'Authorization':\"Bearer \"+localStorage.getItem(\"jwt\")\n                        },\n                        body:JSON.stringify(\n                            {\n                                pic:data.url\n                            }\n                        )\n                    }\n\n                    ).then(res=>res.json())\n                    .then(result=>{\n                        console.log(result)\n                        localStorage.setItem(\"user\",JSON.stringify({...state,pic:result.pic}))\n                        dispatch({type:\"UPDATEPIC\",payload:result.pic})\n                        window.location.reload();\n                    })\n                 //   window.location.reload();\n\n                })\n                .catch(err => {\n                    console.log(err)\n                })\n        }\n    },[image])\n\n    const updatePhoto = (file) => {\n        setImage(file)\n\n  \n\n    }\n    return (\n        <div style={{ maxWidth: \"550px\", margin: \"0px auto\" }}>\n            <div style={{\n                margin: \"18px 0px\",\n                borderBottom: \"1px solid grey\"\n            }}>\n                <div style={{\n                    display: 'flex',\n                    justifyContent: \"space-around\",\n                    //    margin:\"120px 0px\",\n                    //    borderBottom:\"1px solid grey\"\n                }}>\n                    <div>\n                        {/* {console.log(state)} */}\n                        <img style={{ width: \"200px\", height: \"200px\", borderRadius: \"100px\" }} src={state ? state.pic : \"loading\"} />\n                    </div>\n                    <div>\n                        <h5>{state ? state.name : \"loading\"}</h5>\n                        <h5>{state ? state.email : \"loading\"}</h5>\n\n                        < div style={{ display: \"flex\", justifyContent: \"space-between\", width: \"108%\" }}>\n\n                            <h6>{mypics ? mypics.length : \"0\"} posts</h6>\n                            <h6>{state ? state.followers.length : \"0\"} followers</h6>\n                            <h6>{state ? state.following.length : \"0\"} following</h6>\n                        </div>\n                    </div>\n                    <div>\n\n                    </div>\n                </div>\n                <div style={{\n                    position: \"relative\",\n                    margin: \"8px 50px\",\n                }}>\n\n         <div className=\"file-field input-field\" style={{margin:\"10px\"}}>\n                    <div className=\"btn\">\n                        <span>Update Pic</span>\n                        <input type=\"file\" onChange={e => { updatePhoto(e.target.files[0]) }} />\n                    </div>\n                    <div className=\"file-path-wrapper\">\n                        <input className=\"file-path validate\" type=\"text\" />\n                    </div>\n                    </div>\n\n\n                </div>\n\n            </div>\n\n\n            <div className=\"gallery\">\n                {\n                    mypics ?\n                        mypics.map(item => {\n                            return (\n                                <img key={item._id} className='item' src={item.photo} alt={item.title} />\n                            )\n                        }) : null\n                }\n            </div>\n        </div>\n    )\n}\n\n\nexport default Profile"]},"metadata":{},"sourceType":"module"}