{"ast":null,"code":"import _slicedToArray from\"/Users/bhawesh/Desktop/01-starting-setup/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Link,useNavigate}from'react-router-dom';import{useState,useContext}from\"react\";import M from'materialize-css';import{UserContext}from'../../App';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SignIn=function SignIn(){var _useContext=useContext(UserContext),state=_useContext.state,dispatch=_useContext.dispatch;var history=useNavigate();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];/*  const PostData = ()=>{\n       // if(!/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(email))\n      //  {\n      //      M.toast({html:\"Invalid Email\",classes:\"#e53935 red darken-1\"})\n      //      return;\n      //  }\n        fetch('/signin',{\n            method:\"post\",\n            headers:{\n                \"Content-Type\":\"application/json\"\n            },\n            body:JSON.stringify({\n                password,\n                email\n            })\n\n        }).then(res=>res.json())\n        .then(data=>{\n           if(data.error)\n           {\n            M.toast({html: data.error,classes:\"#e53935 red darken-1\"})\n           }\n           else{\n            M.toast({html:\"Successfully Signed In\",classes:\"#4caf50 green\"})\n            history('/')\n           \n           } \n        }).catch(err=>{\n            console.log(err);\n        })\n     \n    }*/var PostData=function PostData(){if(!/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(email)){M.toast({html:\"invalid email\",classes:\"#c62828 red darken-3\"});return;}fetch(\"/signin\",{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({password:password,email:email})}).then(function(res){return res.json();}).then(function(data){console.log(data);if(data.error){M.toast({html:data.error,classes:\"#c62828 red darken-3\"});}else{localStorage.setItem(\"jwt\",data.token);localStorage.setItem(\"user\",JSON.stringify(data.user));dispatch({type:\"USER\",payload:data.user});M.toast({html:\"signedin success\",classes:\"#43a047 green darken-1\"});history('/');}}).catch(function(err){console.log(err);});};return/*#__PURE__*/_jsx(\"div\",{className:\"mycard\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card auth-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Upload\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"email\",value:email,onChange:function onChange(e){setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"password\",value:password,onChange:function onChange(e){setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{class:\"btn waves-effect waves-light\",onClick:PostData,children:\"Sign In\"}),/*#__PURE__*/_jsx(\"h5\",{children:/*#__PURE__*/_jsx(Link,{to:\"/Signup\",children:\"Don't have an account ?\"})})]})});};export default SignIn;","map":{"version":3,"sources":["/Users/bhawesh/Desktop/01-starting-setup/src/components/screens/SignIn.js"],"names":["Link","useNavigate","useState","useContext","M","UserContext","SignIn","state","dispatch","history","email","setEmail","password","setPassword","PostData","test","toast","html","classes","fetch","method","headers","body","JSON","stringify","then","res","json","data","console","log","error","localStorage","setItem","token","user","type","payload","catch","err","e","target","value"],"mappings":"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","sourcesContent":["import {Link,useNavigate} from 'react-router-dom'\nimport {useState,useContext} from \"react\"\nimport M from 'materialize-css'\nimport { UserContext } from '../../App'\nconst SignIn = ()=>{\n\n    const {state,dispatch} = useContext(UserContext);\n    const history = useNavigate()\n  \n    const [email,setEmail] = useState('')\n    const [password,setPassword] = useState('')\n  /*  const PostData = ()=>{\n       // if(!/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(email))\n      //  {\n      //      M.toast({html:\"Invalid Email\",classes:\"#e53935 red darken-1\"})\n      //      return;\n      //  }\n        fetch('/signin',{\n            method:\"post\",\n            headers:{\n                \"Content-Type\":\"application/json\"\n            },\n            body:JSON.stringify({\n                password,\n                email\n            })\n\n        }).then(res=>res.json())\n        .then(data=>{\n           if(data.error)\n           {\n            M.toast({html: data.error,classes:\"#e53935 red darken-1\"})\n           }\n           else{\n            M.toast({html:\"Successfully Signed In\",classes:\"#4caf50 green\"})\n            history('/')\n           \n           } \n        }).catch(err=>{\n            console.log(err);\n        })\n     \n    }*/\n    const PostData = ()=>{\n        if(!/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(email)){\n            M.toast({html: \"invalid email\",classes:\"#c62828 red darken-3\"})\n            return\n        }\n        fetch(\"/signin\",{\n            method:\"post\",\n            headers:{\n                \"Content-Type\":\"application/json\"\n               \n            },\n            body:JSON.stringify({\n                password,\n                email\n            })\n        }).then(res=>res.json())\n        .then(data=>{\n            console.log(data)\n           if(data.error){\n              M.toast({html: data.error,classes:\"#c62828 red darken-3\"})\n           }\n           else{\n               localStorage.setItem(\"jwt\",data.token)\n               localStorage.setItem(\"user\",JSON.stringify(data.user))\n               dispatch({type:\"USER\",payload:data.user})\n               M.toast({html:\"signedin success\",classes:\"#43a047 green darken-1\"})\n               history('/')\n           }\n        }).catch(err=>{\n            console.log(err)\n        })\n    }\n\n\n\n    return (\n      <div className=\"mycard\">\n          <div className=\"card auth-card\">\n              <h2>Upload</h2>\n              <input type=\"text\" placeholder=\"email\" value={email} onChange={(e)=>{setEmail(e.target.value)}}>\n              </input>\n              <input type=\"password\" placeholder=\"password\" value={password} onChange={(e)=>{setPassword(e.target.value)}}>\n              </input>\n              <button class=\"btn waves-effect waves-light\" onClick={PostData}>Sign In\n  \n  </button>\n  <h5><Link to=\"/Signup\">Don't have an account ?</Link></h5>\n        \n\n          </div>\n      </div>\n    )\n}\n\nexport default SignIn;"]},"metadata":{},"sourceType":"module"}