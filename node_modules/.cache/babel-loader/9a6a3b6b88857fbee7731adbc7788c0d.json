{"ast":null,"code":"import _slicedToArray from\"/Users/bhawesh/Desktop/01-starting-setup/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/*\nimport React,{useState,useEffect} from 'react'\nimport M from 'materialize-css'\n// import {useHistory} from 'react-router-dom'\nimport { useNavigate } from 'react-router-dom';\n\n\nconst CreatePost = ()=>{\n    const navigate = useNavigate();\n    const [title,setTitle] = useState(\"\")\n    const [body,setBody] = useState(\"\")\n    const [image,setImage] = useState(\"\")\n    const [url,setUrl] = useState(\"\")\n\n    const postDetails = ()=>{\n        const data = new FormData()\n        data.append(\"file\",image)\n        data.append(\"upload_preset\",\"upload\")\n        data.append(\"cloud_name\",\"ddlgib7yw\")\n        fetch(\"https://api.cloudinary.com/v1_1/cnq/image/upload\",{\n            method:\"post\",\n            body:data\n        })\n        .then(res=>res.json())\n        .then(data=>{\n            console.log(data)\n        //    setUrl(data.url)\n        })\n        .catch(err=>{\n            console.log(err)\n        })\n\n        // fetch(\"/createpost\",{\n        //     method:\"post\",\n        //     headers:{\n        //         \"Content-Type\":\"application/json\"\n        //     },\n        //     body:JSON.stringify({\n        //         title,\n        //         body,\n        //         pic:url\n        //     })\n        // }).then(res=>res.json())\n        // .then(data=>{\n        //     console.log(data)\n        //    if(data.error){\n        //       M.toast({html: data.error,classes:\"#c62828 red darken-3\"})\n        //    }\n        //    else{\n         \n        //        M.toast({html:\"post created successfully\",classes:\"#43a047 green darken-1\"})\n        //        navigate('/  ');\n        //    }\n        // }).catch(err=>{\n        //     console.log(err)\n        // })\n     \n    }\n\n    return (\n        <div className=\"card input-field\" style={{\n            margin:\"10px auto\",\n            maxWidth:\"500px\",\n            textAlign:\"center\",\n            padding:\"20px\"\n        }}>\n\n        <input \n           type=\"text\"\n            placeholder=\"title\"\n            value={title}\n            onChange={(e)=>setTitle(e.target.value)}\n        />\n        <input\n            type=\"text\"\n             placeholder=\"body\"\n             value={body}\n            onChange={(e)=>setBody(e.target.value)}\n        />\n        <div className=\"file-field input-field\">\n            <div className=\"btn #64b5f6 blue darken-1\">\n                <span>Uplaod Image</span>\n                <input type=\"file\" onChange={(e)=>setImage(e.target.files[0])} />\n            </div>\n            <div className=\"file-path-wrapper\">\n                <input className=\"file-path validate\" type=\"text\" />\n            </div>\n        </div>  \n\n        <button className=\"btn waves-effect waves-light\"\n        onClick={()=>postDetails()}\n        >Submit Post\n        </button>\n\n        </div>\n    )\n}\n*/import{useState,useEffect}from'react';import M from'materialize-css';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreatePost=function CreatePost(){var history=useNavigate();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),body=_useState4[0],setBody=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),image=_useState6[0],setImage=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),url=_useState8[0],setUrl=_useState8[1];useEffect(function(){if(url){fetch(\"/createPost\",{method:\"post\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({title:title,body:body,pic:url})}).then(function(res){return res.json();}).then(function(data){console.log(data);if(data.error){M.toast({html:data.error,classes:\"#c62828 red darken-3\"});}else{M.toast({html:\"Posted Successfully\",classes:\"#43a047 green darken-1\"});history('/');}}).catch(function(err){console.log(err);});}},[url]);var postDetail=function postDetail(){var data=new FormData();data.append('file',image);data.append('upload_preset','upload');data.append('cloud_name','ddlgib7yw');fetch(\"https://api.cloudinary.com/v1_1/ddlgib7yw/image/upload\",{method:\"post\",body:data}).then(function(res){return res.json();}).then(function(data){setUrl(data.url);}).catch(function(err){console.log(err);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"card input-filed\",style:{margin:\"40px auto\",padding:\"20px\",textAlign:\"center\",maxWidth:\"550px\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"title\",value:title,onChange:function onChange(e){setTitle(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"body\",value:body,onChange:function onChange(e){setBody(e.target.value);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"file-field input-field\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"btn\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Upload Image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:function onChange(e){setImage(e.target.files[0]);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"file-path-wrapper\",children:/*#__PURE__*/_jsx(\"input\",{className:\"file-path validate\",type:\"text\"})})]}),/*#__PURE__*/_jsx(\"button\",{class:\"btn waves-effect waves-light\",onClick:postDetail,children:\"Submit Post\"})]});};export default CreatePost;","map":{"version":3,"sources":["/Users/bhawesh/Desktop/01-starting-setup/src/components/screens/CreatePost.js"],"names":["useState","useEffect","M","useNavigate","CreatePost","history","title","setTitle","body","setBody","image","setImage","url","setUrl","fetch","method","headers","localStorage","getItem","JSON","stringify","pic","then","res","json","data","console","log","error","toast","html","classes","catch","err","postDetail","FormData","append","margin","padding","textAlign","maxWidth","e","target","value","files"],"mappings":"8HACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAEA,OAAQA,QAAR,CAAiBC,SAAjB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,CAAP,KAAc,iBAAd,CACA,OAAQC,WAAR,KAA0B,kBAA1B,C,wFAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAI,CACnB,GAAMC,CAAAA,OAAO,CAAGF,WAAW,EAA3B,CACA,cAAyBH,QAAQ,CAAC,EAAD,CAAjC,wCAAOM,KAAP,eAAaC,QAAb,eACA,eAAuBP,QAAQ,CAAC,EAAD,CAA/B,yCAAOQ,IAAP,eAAYC,OAAZ,eACA,eAAyBT,QAAQ,CAAC,EAAD,CAAjC,yCAAOU,KAAP,eAAaC,QAAb,eACA,eAAqBX,QAAQ,CAAC,EAAD,CAA7B,yCAAOY,GAAP,eAAWC,MAAX,eAEAZ,SAAS,CAAC,UAAI,CACV,GAAGW,GAAH,CACA,CACIE,KAAK,CAAC,aAAD,CAAe,CAChBC,MAAM,CAAC,MADS,CAEhBC,OAAO,CAAC,CACJ,eAAe,kBADX,CAEJ,gBAAgB,UAAUC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAFtB,CAFQ,CAMhBV,IAAI,CAACW,IAAI,CAACC,SAAL,CAAe,CAChBd,KAAK,CAALA,KADgB,CAEhBE,IAAI,CAAJA,IAFgB,CAGhBa,GAAG,CAACT,GAHY,CAAf,CANW,CAAf,CAAL,CAWGU,IAXH,CAWQ,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAJ,EAAF,EAXX,EAYCF,IAZD,CAYM,SAAAG,IAAI,CAAE,CACRC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACD,GAAGA,IAAI,CAACG,KAAR,CAAc,CACX1B,CAAC,CAAC2B,KAAF,CAAQ,CAACC,IAAI,CAAEL,IAAI,CAACG,KAAZ,CAAkBG,OAAO,CAAC,sBAA1B,CAAR,EACF,CAFD,IAGI,CAEA7B,CAAC,CAAC2B,KAAF,CAAQ,CAACC,IAAI,CAAC,qBAAN,CAA4BC,OAAO,CAAC,wBAApC,CAAR,EACA1B,OAAO,CAAC,GAAD,CAAP,CACH,CACH,CAtBD,EAsBG2B,KAtBH,CAsBS,SAAAC,GAAG,CAAE,CACVP,OAAO,CAACC,GAAR,CAAYM,GAAZ,EACH,CAxBD,EAyBH,CACJ,CA7BQ,CA6BP,CAACrB,GAAD,CA7BO,CAAT,CA+BA,GAAMsB,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAI,CACnB,GAAMT,CAAAA,IAAI,CAAG,GAAIU,CAAAA,QAAJ,EAAb,CACAV,IAAI,CAACW,MAAL,CAAY,MAAZ,CAAmB1B,KAAnB,EACAe,IAAI,CAACW,MAAL,CAAY,eAAZ,CAA4B,QAA5B,EACAX,IAAI,CAACW,MAAL,CAAY,YAAZ,CAAyB,WAAzB,EACAtB,KAAK,CAAC,wDAAD,CAA0D,CAC3DC,MAAM,CAAC,MADoD,CAE3DP,IAAI,CAACiB,IAFsD,CAA1D,CAAL,CAGGH,IAHH,CAGQ,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAJ,EAAF,EAHX,EAICF,IAJD,CAIM,SAAAG,IAAI,CAAE,CACRZ,MAAM,CAACY,IAAI,CAACb,GAAN,CAAN,CACH,CAND,EAMGoB,KANH,CAMS,SAAAC,GAAG,CAAE,CACVP,OAAO,CAACC,GAAR,CAAYM,GAAZ,EACH,CARD,EAWH,CAhBD,CAoBA,mBACI,aAAK,SAAS,CAAC,kBAAf,CAAkC,KAAK,CAAE,CACrCI,MAAM,CAAC,WAD8B,CAErCC,OAAO,CAAC,MAF6B,CAGrCC,SAAS,CAAC,QAH2B,CAIrCC,QAAQ,CAAC,OAJ4B,CAAzC,wBAMI,cAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,OAA/B,CAAuC,KAAK,CAAElC,KAA9C,CAAqD,QAAQ,CAAE,kBAACmC,CAAD,CAAK,CAAClC,QAAQ,CAACkC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAR,CAAyB,CAA9F,EANJ,cAOI,cAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,MAA/B,CAAsC,KAAK,CAAEnC,IAA7C,CAAmD,QAAQ,CAAE,kBAACiC,CAAD,CAAK,CAAChC,OAAO,CAACgC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAP,CAAwB,CAA3F,EAPJ,cAQQ,aAAK,SAAS,CAAC,wBAAf,wBACV,aAAK,SAAS,CAAC,KAAf,wBACE,sCADF,cAEE,cAAO,IAAI,CAAC,MAAZ,CAAmB,QAAQ,CAAE,kBAAAF,CAAC,CAAE,CAAC9B,QAAQ,CAAC8B,CAAC,CAACC,MAAF,CAASE,KAAT,CAAe,CAAf,CAAD,CAAR,CAA4B,CAA7D,EAFF,GADU,cAKV,YAAK,SAAS,CAAC,mBAAf,uBACE,cAAO,SAAS,CAAC,oBAAjB,CAAsC,IAAI,CAAC,MAA3C,EADF,EALU,GARR,cAiBJ,eAAQ,KAAK,CAAC,8BAAd,CAA6C,OAAO,CAAEV,UAAtD,yBAjBI,GADJ,CAwBH,CAlFD,CAoFA,cAAe9B,CAAAA,UAAf","sourcesContent":["\n/*\nimport React,{useState,useEffect} from 'react'\nimport M from 'materialize-css'\n// import {useHistory} from 'react-router-dom'\nimport { useNavigate } from 'react-router-dom';\n\n\nconst CreatePost = ()=>{\n    const navigate = useNavigate();\n    const [title,setTitle] = useState(\"\")\n    const [body,setBody] = useState(\"\")\n    const [image,setImage] = useState(\"\")\n    const [url,setUrl] = useState(\"\")\n\n    const postDetails = ()=>{\n        const data = new FormData()\n        data.append(\"file\",image)\n        data.append(\"upload_preset\",\"upload\")\n        data.append(\"cloud_name\",\"ddlgib7yw\")\n        fetch(\"https://api.cloudinary.com/v1_1/cnq/image/upload\",{\n            method:\"post\",\n            body:data\n        })\n        .then(res=>res.json())\n        .then(data=>{\n            console.log(data)\n        //    setUrl(data.url)\n        })\n        .catch(err=>{\n            console.log(err)\n        })\n\n        // fetch(\"/createpost\",{\n        //     method:\"post\",\n        //     headers:{\n        //         \"Content-Type\":\"application/json\"\n        //     },\n        //     body:JSON.stringify({\n        //         title,\n        //         body,\n        //         pic:url\n        //     })\n        // }).then(res=>res.json())\n        // .then(data=>{\n        //     console.log(data)\n        //    if(data.error){\n        //       M.toast({html: data.error,classes:\"#c62828 red darken-3\"})\n        //    }\n        //    else{\n         \n        //        M.toast({html:\"post created successfully\",classes:\"#43a047 green darken-1\"})\n        //        navigate('/  ');\n        //    }\n        // }).catch(err=>{\n        //     console.log(err)\n        // })\n     \n    }\n\n    return (\n        <div className=\"card input-field\" style={{\n            margin:\"10px auto\",\n            maxWidth:\"500px\",\n            textAlign:\"center\",\n            padding:\"20px\"\n        }}>\n\n        <input \n           type=\"text\"\n            placeholder=\"title\"\n            value={title}\n            onChange={(e)=>setTitle(e.target.value)}\n        />\n        <input\n            type=\"text\"\n             placeholder=\"body\"\n             value={body}\n            onChange={(e)=>setBody(e.target.value)}\n        />\n        <div className=\"file-field input-field\">\n            <div className=\"btn #64b5f6 blue darken-1\">\n                <span>Uplaod Image</span>\n                <input type=\"file\" onChange={(e)=>setImage(e.target.files[0])} />\n            </div>\n            <div className=\"file-path-wrapper\">\n                <input className=\"file-path validate\" type=\"text\" />\n            </div>\n        </div>  \n\n        <button className=\"btn waves-effect waves-light\"\n        onClick={()=>postDetails()}\n        >Submit Post\n        </button>\n\n        </div>\n    )\n}\n*/\n\nimport {useState,useEffect} from 'react'\nimport M from 'materialize-css'\nimport {useNavigate} from 'react-router-dom'\n\nconst CreatePost = ()=>{\n    const history = useNavigate()\n    const [title,setTitle] = useState('');\n    const [body,setBody] = useState('');\n    const [image,setImage] = useState('');\n    const [url,setUrl] = useState('');\n\n    useEffect(()=>{\n        if(url)\n        {\n            fetch(\"/createPost\",{\n                method:\"post\",\n                headers:{\n                    \"Content-Type\":\"application/json\",\n                    \"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")\n                },\n                body:JSON.stringify({\n                    title,\n                    body,\n                    pic:url\n                })\n            }).then(res=>res.json())\n            .then(data=>{\n                console.log(data)\n               if(data.error){\n                  M.toast({html: data.error,classes:\"#c62828 red darken-3\"})\n               }\n               else{\n             \n                   M.toast({html:\"Posted Successfully\",classes:\"#43a047 green darken-1\"})\n                   history('/')\n               }\n            }).catch(err=>{\n                console.log(err)\n            })\n        }\n    },[url])\n\n    const postDetail = ()=>{\n        const data = new FormData();\n        data.append('file',image)\n        data.append('upload_preset','upload')\n        data.append('cloud_name','ddlgib7yw')\n        fetch(\"https://api.cloudinary.com/v1_1/ddlgib7yw/image/upload\",{\n            method:\"post\",\n            body:data\n        }).then(res=>res.json())\n        .then(data=>{\n            setUrl(data.url)\n        }).catch(err=>{\n            console.log(err)\n        })\n\n       \n    }\n\n\n\n    return (\n        <div className=\"card input-filed\" style={{\n            margin:\"40px auto\",\n            padding:\"20px\",\n            textAlign:\"center\",\n            maxWidth:\"550px\"\n        }}>\n            <input type=\"text\" placeholder=\"title\" value={title} onChange={(e)=>{setTitle(e.target.value)}} ></input>\n            <input type=\"text\" placeholder=\"body\" value={body} onChange={(e)=>{setBody(e.target.value)}}></input>\n                <div className=\"file-field input-field\">\n      <div className=\"btn\">\n        <span>Upload Image</span>\n        <input type=\"file\" onChange={e=>{setImage(e.target.files[0])}} />\n      </div>\n      <div className=\"file-path-wrapper\">\n        <input className=\"file-path validate\" type=\"text\" />\n      </div>\n    </div>\n    <button class=\"btn waves-effect waves-light\" onClick={postDetail}>Submit Post\n  \n  </button>\n\n        </div>\n    )\n}\n\nexport default CreatePost;"]},"metadata":{},"sourceType":"module"}